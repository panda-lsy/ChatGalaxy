<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ•°æ®ç®¡ç†å™¨ - ChatGalaxy</title>
    <link href="https://cdn.jsdelivr.net/npm/remixicon@3.5.0/fonts/remixicon.css" rel="stylesheet">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/data-manager.css">
    <link rel="stylesheet" href="css/style.css">
    <link rel="stylesheet" href="css/data-manager.css">
    <style>
        /* å¼ºåˆ¶è¦†ç›– style.css çš„ overflow å’Œ height é™åˆ¶ */
        html {
            height: auto !important;
            overflow: auto !important;
        }
        body[data-manager-page] {
            height: auto !important;
            min-height: 100vh;
            overflow: auto !important;
            display: block !important;
        }
        
        /* å¯¼å…¥é¢æ¿å¤´éƒ¨æ–‡å­—ä¼˜åŒ– - æ›´æ˜æ˜¾çš„ç™½è‰²æ–‡å­— */
        .import-panel-header h3 {
            color: #ffffff !important;
            font-size: 22px !important;
            font-weight: 700 !important;
            text-shadow: 
                0 2px 8px rgba(0, 0, 0, 0.5),
                0 4px 12px rgba(0, 0, 0, 0.3) !important;
            letter-spacing: 0.5px !important;
        }
        
        .import-panel-header i {
            color: #ffffff !important;
            filter: drop-shadow(0 2px 4px rgba(0, 0, 0, 0.4)) !important;
        }
    </style>
</head>
<body data-theme="light" data-manager-page>
    <div class="data-manager-container">
        <!-- å¤´éƒ¨ -->
        <div class="data-manager-header">
            <h1><i class="ri-database-2-line"></i> æ•°æ®ç®¡ç†å™¨</h1>
            <p>ç®¡ç†æ‚¨çš„èŠå¤©æ•°æ®é›†ï¼Œæ”¯æŒå¯¼å…¥ã€å¯¼å‡ºã€åˆ‡æ¢å’Œç¼–è¾‘</p>
        </div>

        <!-- æ¶ˆæ¯æç¤º -->
        <div id="alert-success" class="alert alert-success">
            <i class="ri-checkbox-circle-line"></i>
            <span></span>
        </div>
        <div id="alert-error" class="alert alert-error">
            <i class="ri-error-warning-line"></i>
            <span></span>
        </div>
        <div id="alert-warning" class="alert alert-warning">
            <i class="ri-alert-line"></i>
            <span></span>
        </div>
        <div id="alert-info" class="alert alert-info">
            <i class="ri-information-line"></i>
            <span></span>
        </div>

        <!-- å¯¼å…¥é¢æ¿ï¼ˆå†…åµŒå¼ï¼‰ -->
        <div id="import-panel" class="import-panel">
            <div class="import-panel-header" onclick="toggleImportPanel()">
                <h3><i class="ri-upload-cloud-line"></i> å¯¼å…¥æ•°æ®é›†</h3>
                <i class="ri-arrow-down-s-line" id="import-panel-icon"></i>
            </div>
            
            <div class="import-panel-content" id="import-panel-content">
                <!-- ä¸Šä¼ åŒºåŸŸ -->
                <div id="upload-zone" class="upload-zone">
                    <div class="upload-icon">ğŸ“</div>
                    <div class="upload-text">æ‹–æ‹½JSONæ–‡ä»¶åˆ°æ­¤å¤„ï¼Œæˆ–ç‚¹å‡»é€‰æ‹©æ–‡ä»¶</div>
                    <div class="upload-hint">æ”¯æŒæœ€å¤§10MBçš„JSONæ–‡ä»¶</div>
                    <input type="file" id="file-input" accept=".json" style="display: none;">
                </div>

                <!-- æ–‡ä»¶ä¿¡æ¯ -->
                <div id="file-info" style="display: none; margin-bottom: 20px;">
                    <div class="alert alert-info show-inline">
                        <i class="ri-file-line"></i>
                        <span id="file-name"></span>
                    </div>
                </div>

                <!-- éªŒè¯è­¦å‘Š -->
                <div id="validation-warnings" class="validation-warnings" style="display: none;">
                    <h4><i class="ri-alert-line"></i> å¯¼å…¥è­¦å‘Š</h4>
                    <ul id="validation-warning-list"></ul>
                </div>

                <!-- æ•°æ®é›†ä¿¡æ¯è¡¨å• -->
                <div id="dataset-form" style="display: none;">
                    <div class="form-group">
                        <label class="form-label">æ•°æ®é›†åç§°</label>
                        <input type="text" id="dataset-name" class="form-input" placeholder="ä¾‹å¦‚ï¼šæˆ‘çš„èŠå¤©è®°å½•">
                    </div>

                    <div class="form-group">
                        <label class="form-label">æè¿°ï¼ˆå¯é€‰ï¼‰</label>
                        <textarea id="dataset-description" class="form-textarea" placeholder="ç®€å•æè¿°è¿™ä¸ªæ•°æ®é›†..."></textarea>
                    </div>

                    <div class="form-group">
                        <label class="form-label">æ ‡ç­¾</label>
                        <div class="tag-selector" id="tag-selector">
                            <div class="tag-option" onclick="toggleTag(this)">æ¸¸æˆ</div>
                            <div class="tag-option" onclick="toggleTag(this)">å·¥ä½œ</div>
                            <div class="tag-option" onclick="toggleTag(this)">å­¦ä¹ </div>
                            <div class="tag-option" onclick="toggleTag(this)">ç”Ÿæ´»</div>
                            <div class="tag-option" onclick="toggleTag(this)">ç¤¾äº¤</div>
                            <div class="tag-option" onclick="toggleTag(this)">å…¶ä»–</div>
                        </div>
                    </div>

                    <div class="form-group">
                        <label class="form-label">ä¸»é¢˜é¢œè‰²</label>
                        <div class="color-selector" id="color-selector">
                            <div class="color-option selected" style="background: #3498db;" data-color="#3498db" onclick="selectColor(this)"></div>
                            <div class="color-option" style="background: #10b981;" data-color="#10b981" onclick="selectColor(this)"></div>
                            <div class="color-option" style="background: #f59e0b;" data-color="#f59e0b" onclick="selectColor(this)"></div>
                            <div class="color-option" style="background: #ef4444;" data-color="#ef4444" onclick="selectColor(this)"></div>
                            <div class="color-option" style="background: #8b5cf6;" data-color="#8b5cf6" onclick="selectColor(this)"></div>
                            <div class="color-option" style="background: #ec4899;" data-color="#ec4899" onclick="selectColor(this)"></div>
                        </div>
                    </div>

                    <!-- è¿›åº¦æ¡ -->
                    <div id="import-progress" class="progress-container" style="display: none;">
                        <div class="progress-bar-bg">
                            <div id="progress-bar-fill" class="progress-bar-fill" style="width: 0%;">0%</div>
                        </div>
                        <div id="progress-text" class="progress-text">å‡†å¤‡å¯¼å…¥...</div>
                    </div>

                    <div class="action-buttons" style="margin-top: 20px;">
                        <button class="action-btn primary" id="import-btn" onclick="startImport()" style="flex: 1;">
                            <i class="ri-upload-line"></i>
                            å¼€å§‹å¯¼å…¥
                        </button>
                        <button class="action-btn" onclick="resetImportForm()">
                            <i class="ri-refresh-line"></i>
                            é‡ç½®
                        </button>
                    </div>
                </div>
            </div>
        </div>

        <!-- æ“ä½œæŒ‰é’® -->
        <div class="action-buttons">
            <button class="action-btn" onclick="createNewDataset()">
                <i class="ri-add-circle-line"></i>
                åˆ›å»ºç©ºæ•°æ®é›†
            </button>
            <button class="action-btn" onclick="loadDemoDataset()">
                <i class="ri-magic-line"></i>
                åŠ è½½æ¼”ç¤ºæ•°æ®
            </button>
            <button class="action-btn" onclick="refreshDatasetList()">
                <i class="ri-refresh-line"></i>
                åˆ·æ–°åˆ—è¡¨
            </button>
            <button class="action-btn primary" onclick="location.href='index.html'">
                <i class="ri-arrow-go-back-line"></i>
                è¿”å›æ˜Ÿç³»
            </button>
        </div>

        <!-- æ•°æ®é›†åˆ—è¡¨ -->
        <div id="dataset-list" class="dataset-list">
            <!-- æ•°æ®é›†å¡ç‰‡å°†åŠ¨æ€ç”Ÿæˆ -->
            <div class="empty-state">
                <div class="empty-state-icon">ğŸ“¦</div>
                <div class="empty-state-text">æš‚æ— æ•°æ®é›†</div>
                <div class="empty-state-hint">ç‚¹å‡»ä¸Šæ–¹"åŠ è½½æ¼”ç¤ºæ•°æ®"ä½“éªŒï¼Œæˆ–"å¯¼å…¥æ•°æ®é›†"å¯¼å…¥æ‚¨è‡ªå·±çš„æ•°æ®</div>
            </div>
        </div>
    </div>

    <!-- åŠ è½½è„šæœ¬ -->
    <script src="js/data-manager.js"></script>
    <script src="js/data-import.js"></script>
    <script src="js/processors/text-processor.js"></script>
    <script src="js/data-manager-ui.js"></script>
</body>
</html>
